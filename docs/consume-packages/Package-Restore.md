---
title: NuGet-Paketwiederherstellung
description: Übersicht über die Wiederherstellung von Paketen mit NuGet, von denen ein Projekt abhängig ist, die auch die Deaktivierung von Wiederherstellungsversionen sowie von eingeschränkten Versionen umfasst.
author: JonDouglas
ms.author: jodou
ms.date: 08/05/2019
ms.topic: conceptual
ms.openlocfilehash: e5dfd9f8dd0439751ddd3863cad03f3b463e1487
ms.sourcegitcommit: bb9560dcc7055bde84b4940c5eb0db402bf46a48
ms.translationtype: HT
ms.contentlocale: de-DE
ms.lasthandoff: 03/23/2021
ms.locfileid: "104859238"
---
# <a name="restore-packages-using-package-restore"></a><span data-ttu-id="6d1e6-103">Wiederherstellen von Paketen mithilfe der Paketwiederherstellung</span><span class="sxs-lookup"><span data-stu-id="6d1e6-103">Restore packages using Package Restore</span></span>

<span data-ttu-id="6d1e6-104">Die NuGet-**Paketwiederherstellung** installiert alle Abhängigkeiten eines Projekts, die in der Projektdatei oder `packages.config` aufgelistet sind, um eine übersichtlichere Entwicklungsumgebung zu gewährleisten und die Größe des Repositorys zu reduzieren.</span><span class="sxs-lookup"><span data-stu-id="6d1e6-104">To promote a cleaner development environment and to reduce repository size, NuGet **Package Restore** installs all of a project's dependencies listed in either the project file or `packages.config`.</span></span> <span data-ttu-id="6d1e6-105">Die Befehle `dotnet build` und `dotnet run` in .NET Core 2.0 und höher führen eine automatische Paketwiederherstellung durch.</span><span class="sxs-lookup"><span data-stu-id="6d1e6-105">The .NET Core 2.0+ `dotnet build` and `dotnet run` commands do an automatic package restore.</span></span> <span data-ttu-id="6d1e6-106">Visual Studio kann Pakete automatisch wiederherstellen, wenn es ein Projekt erstellt. Sie können Pakete jederzeit über Visual Studio, `nuget restore`. `dotnet restore` und xbuild von Mono wiederherstellen.</span><span class="sxs-lookup"><span data-stu-id="6d1e6-106">Visual Studio can restore packages automatically when it builds a project, and you can restore packages at any time through Visual Studio, `nuget restore`, `dotnet restore`, and xbuild on Mono.</span></span>

<span data-ttu-id="6d1e6-107">Die Paketwiederherstellung stellt sicher, dass alle Abhängigkeiten eines Projekts verfügbar sind, ohne dass diese Pakete in der Quellcodeverwaltung gespeichert werden müssen.</span><span class="sxs-lookup"><span data-stu-id="6d1e6-107">Package Restore makes sure that all a project's dependencies are available, without having to store them in source control.</span></span> <span data-ttu-id="6d1e6-108">Informationen zur Konfiguration Ihres Repositorys zum Ausschließen von Paketbinärdateien finden Sie unter [Überspringen von NuGet-Paketen in Quellcodeverwaltungssystemen](../consume-packages/packages-and-source-control.md).</span><span class="sxs-lookup"><span data-stu-id="6d1e6-108">To configure your source control repository to exclude the package binaries, see [Packages and source control](../consume-packages/packages-and-source-control.md).</span></span> 

## <a name="package-restore-overview"></a><span data-ttu-id="6d1e6-109">Übersicht zur Paketwiederherstellung</span><span class="sxs-lookup"><span data-stu-id="6d1e6-109">Package Restore overview</span></span>

<span data-ttu-id="6d1e6-110">Bei der Paketwiederherstellung werden zunächst die direkten Abhängigkeiten eines Projekts bedarfsbasiert installiert. Anschließend werden alle Abhängigkeiten dieser Pakete im gesamten Abhängigkeitsdiagramm installiert.</span><span class="sxs-lookup"><span data-stu-id="6d1e6-110">Package Restore first installs the direct dependencies of a project as needed, then installs any dependencies of those packages throughout the entire dependency graph.</span></span>

<span data-ttu-id="6d1e6-111">Wenn ein Paket noch nicht installiert ist, versucht NuGet erst, das Paket aus dem [Cache](../consume-packages/managing-the-global-packages-and-cache-folders.md) abzurufen.</span><span class="sxs-lookup"><span data-stu-id="6d1e6-111">If a package isn't already installed, NuGet first attempts to retrieve it from the [cache](../consume-packages/managing-the-global-packages-and-cache-folders.md).</span></span> <span data-ttu-id="6d1e6-112">Wenn sich das Paket nicht im Cache befindet, versucht NuGet dieses von allen aktivierten Quellen in Visual Studio unter **Extras** > **Optionen** > **NuGet-Paket-Manager** > **Paketquellen** herunterzuladen.</span><span class="sxs-lookup"><span data-stu-id="6d1e6-112">If the package isn't in the cache, NuGet tries to download the package from all enabled sources in the list at **Tools** > **Options** > **NuGet Package Manager** > **Package Sources** in Visual Studio.</span></span> <span data-ttu-id="6d1e6-113">Während der Wiederherstellung ignoriert NuGet die Reihenfolgen der Paketquellen und verwendet dabei das Paket aus einer beliebigen Quelle, die als erstes auf Anforderungen reagiert.</span><span class="sxs-lookup"><span data-stu-id="6d1e6-113">During restore, NuGet ignores the order of package sources, and uses the package from whichever source is first to respond to requests.</span></span> <span data-ttu-id="6d1e6-114">Weitere Informationen zur Verhaltensweise von NuGet finden Sie unter [Konfigurieren des NuGet-Verhaltens](Configuring-NuGet-Behavior.md).</span><span class="sxs-lookup"><span data-stu-id="6d1e6-114">For more information about how NuGet behaves, see [Common NuGet configurations](Configuring-NuGet-Behavior.md).</span></span> 

> [!Note]
> <span data-ttu-id="6d1e6-115">NuGet zeigt erst einen Fehler beim Wiederherstellen eines Pakets an, wenn alle Quellen überprüft wurden.</span><span class="sxs-lookup"><span data-stu-id="6d1e6-115">NuGet doesn't indicate a failure to restore a package until all the sources have been checked.</span></span> <span data-ttu-id="6d1e6-116">Dann meldet NuGet einen Fehler nur für die letzte Quelle aus der Liste.</span><span class="sxs-lookup"><span data-stu-id="6d1e6-116">At that time, NuGet reports a failure for only the last source in the list.</span></span> <span data-ttu-id="6d1e6-117">Der Fehler deutet darauf hin, dass das Paket auch in *keiner* der anderen Quellen vorhanden ist, auch wenn für die einzelnen Quellen kein Fehler angezeigt wird.</span><span class="sxs-lookup"><span data-stu-id="6d1e6-117">The error implies that the package wasn't present on *any* of the other sources, even though errors aren't shown for each of those sources individually.</span></span>

## <a name="restore-packages"></a><span data-ttu-id="6d1e6-118">Pakete wiederherstellen</span><span class="sxs-lookup"><span data-stu-id="6d1e6-118">Restore packages</span></span>

<span data-ttu-id="6d1e6-119">Die Paketwiederherstellung versucht, alle Paketabhängigkeiten im richtigen Zustand zu installieren, der den Paketverweisen in Ihrer Projektdatei ( *.csproj*) oder Ihrer Datei *packages.config* entspricht.</span><span class="sxs-lookup"><span data-stu-id="6d1e6-119">Package Restore tries to install all package dependencies to the correct state matching the package references in your project file (*.csproj*) or your *packages.config* file.</span></span> <span data-ttu-id="6d1e6-120">(In Visual Studio werden die Verweise im Projektmappen-Explorer unter dem Knoten **Dependencies\NuGet** oder **References** angezeigt.)</span><span class="sxs-lookup"><span data-stu-id="6d1e6-120">(In Visual Studio, the references appear in Solution Explorer under the **Dependencies \ NuGet** or the **References** node.)</span></span>

1. <span data-ttu-id="6d1e6-121">Wenn die Paketverweise in der Projektdatei richtig sind, verwenden Sie Ihr bevorzugtes Tool zum Wiederherstellen von Paketen.</span><span class="sxs-lookup"><span data-stu-id="6d1e6-121">If the package references in your project file are correct, use your preferred tool to restore packages.</span></span>

   - <span data-ttu-id="6d1e6-122">[Visual Studio](#restore-using-visual-studio) ([automatische Wiederherstellung](#restore-packages-automatically-using-visual-studio) oder [manuelle Wiederherstellung](#restore-packages-manually-using-visual-studio))</span><span class="sxs-lookup"><span data-stu-id="6d1e6-122">[Visual Studio](#restore-using-visual-studio) ([automatic restore](#restore-packages-automatically-using-visual-studio) or [manual restore](#restore-packages-manually-using-visual-studio))</span></span>
   - [<span data-ttu-id="6d1e6-123">dotnet-CLI</span><span class="sxs-lookup"><span data-stu-id="6d1e6-123">dotnet CLI</span></span>](#restore-using-the-dotnet-cli)
   - [<span data-ttu-id="6d1e6-124">nuget.exe-CLI</span><span class="sxs-lookup"><span data-stu-id="6d1e6-124">nuget.exe CLI</span></span>](#restore-using-the-nugetexe-cli)
   - [<span data-ttu-id="6d1e6-125">MSBuild</span><span class="sxs-lookup"><span data-stu-id="6d1e6-125">MSBuild</span></span>](#restore-using-msbuild)
   - [<span data-ttu-id="6d1e6-126">Azure Pipelines</span><span class="sxs-lookup"><span data-stu-id="6d1e6-126">Azure Pipelines</span></span>](#restore-using-azure-pipelines)
   - [<span data-ttu-id="6d1e6-127">Azure DevOps Server</span><span class="sxs-lookup"><span data-stu-id="6d1e6-127">Azure DevOps Server</span></span>](#restore-using-azure-devops-server)

   <span data-ttu-id="6d1e6-128">Wenn die Paketverweise in Ihrer Projektdatei ( *.csproj*) oder Ihrer Datei *packages.config* falsch sind (sie stimmen nach der Paketwiederherstellung nicht mit dem gewünschten Zustand überein), müssen Sie stattdessen Pakete installieren oder aktualisieren.</span><span class="sxs-lookup"><span data-stu-id="6d1e6-128">If the package references in your project file (*.csproj*) or your *packages.config* file are incorrect (they do not match your desired state following Package Restore), then you need to either install or update packages instead.</span></span>

   <span data-ttu-id="6d1e6-129">Bei Projekten, die PackageReference verwenden, sollte sich das Paket nach einer erfolgreichen Wiederherstellung im Ordner *global-packages* befinden, und die Datei `obj/project.assets.json` wird neu erstellt.</span><span class="sxs-lookup"><span data-stu-id="6d1e6-129">For projects using PackageReference, after a successful restore, the package should be present in the *global-packages* folder and the `obj/project.assets.json` file is recreated.</span></span> <span data-ttu-id="6d1e6-130">Bei Projekten, die `packages.config` verwenden, sollte das Paket im Ordner `packages` des Projekts angezeigt werden.</span><span class="sxs-lookup"><span data-stu-id="6d1e6-130">For projects using `packages.config`, the package should appear in the project's `packages` folder.</span></span> <span data-ttu-id="6d1e6-131">Das Projekt sollte jetzt erfolgreich erstellt werden.</span><span class="sxs-lookup"><span data-stu-id="6d1e6-131">The project should now build successfully.</span></span> 

2. <span data-ttu-id="6d1e6-132">Wenn nach Ausführung der Paketwiederherstellung immer noch fehlende Pakete oder paketbezogene Fehler (z. B. Fehlersymbole im Projektmappen-Explorer in Visual Studio) auftreten, müssen Sie möglicherweise die Anweisungen unter [Problembehandlung bei der Paketwiederherstellung](package-restore-troubleshooting.md) befolgen oder [Pakete erneut installieren und aktualisieren](../consume-packages/reinstalling-and-updating-packages.md).</span><span class="sxs-lookup"><span data-stu-id="6d1e6-132">After running Package Restore, if you still experience missing packages or package-related errors (such as error icons in Solution Explorer in Visual Studio), you may need to follow instructions described in [Troubleshooting Package Restore errors](package-restore-troubleshooting.md) or, alternatively, [reinstall and update packages](../consume-packages/reinstalling-and-updating-packages.md).</span></span>

   <span data-ttu-id="6d1e6-133">In Visual Studio bietet die Paket-Manager-Konsole verschiedene flexible Optionen für die erneute Installation von Paketen.</span><span class="sxs-lookup"><span data-stu-id="6d1e6-133">In Visual Studio, the Package Manager Console provides several flexible options for reinstalling packages.</span></span> <span data-ttu-id="6d1e6-134">Weitere Informationen finden Sie unter[Verwenden von Package-Update](reinstalling-and-updating-packages.md#using-update-package).</span><span class="sxs-lookup"><span data-stu-id="6d1e6-134">See [Using Package-Update](reinstalling-and-updating-packages.md#using-update-package).</span></span>

## <a name="restore-using-visual-studio"></a><span data-ttu-id="6d1e6-135">Wiederherstellung mit Visual Studio</span><span class="sxs-lookup"><span data-stu-id="6d1e6-135">Restore using Visual Studio</span></span>

<span data-ttu-id="6d1e6-136">Verwenden Sie in Visual Studio unter Windows eines der folgenden Verfahren:</span><span class="sxs-lookup"><span data-stu-id="6d1e6-136">In Visual Studio on Windows, either:</span></span>

- <span data-ttu-id="6d1e6-137">Automatisches Wiederherstellen von Paketen oder</span><span class="sxs-lookup"><span data-stu-id="6d1e6-137">Restore packages automatically, or</span></span>

- <span data-ttu-id="6d1e6-138">Manuelles Wiederherstellen von Paketen</span><span class="sxs-lookup"><span data-stu-id="6d1e6-138">Restore packages manually</span></span>

### <a name="restore-packages-automatically-using-visual-studio"></a><span data-ttu-id="6d1e6-139">Automatisches Wiederherstellen von Paketen mit Visual Studio</span><span class="sxs-lookup"><span data-stu-id="6d1e6-139">Restore packages automatically using Visual Studio</span></span>

<span data-ttu-id="6d1e6-140">Die Paketwiederherstellung erfolgt automatisch beim Erstellen eines Projekts über eine Vorlage oder beim Erstellen eines Projekts (abhängig von den Optionen zum [Aktivieren und Deaktivieren der Paketwiederherstellung](#enable-and-disable-package-restore-in-visual-studio)).</span><span class="sxs-lookup"><span data-stu-id="6d1e6-140">Package Restore happens automatically when you create a project from a template or build a project, subject to the options in [Enable and disable package restore](#enable-and-disable-package-restore-in-visual-studio).</span></span> <span data-ttu-id="6d1e6-141">Die Wiederherstellung wird in NuGet 4.0 und höher auch automatisch durchgeführt, wenn Änderungen an einem Projekt im SDK-Format vorgenommen werden (i. d. R. ein .NET Core- oder .NET Standard-Projekt).</span><span class="sxs-lookup"><span data-stu-id="6d1e6-141">In NuGet 4.0+, restore also happens automatically when you make changes to a SDK-style project (typically a .NET Core or .NET Standard project).</span></span>

1. <span data-ttu-id="6d1e6-142">Aktivieren Sie die automatische Paketwiederherstellung, indem Sie **Extras** > **Optionen** > **NuGet-Paket-Manager** auswählen und dann **Automatisch auf fehlende Pakete während des Builds in Visual Studio überprüfen** unter **Paketwiederherstellung** auswählen.</span><span class="sxs-lookup"><span data-stu-id="6d1e6-142">Enable automatic package restore by choosing **Tools** > **Options** > **NuGet Package Manager**, and then selecting **Automatically check for missing packages during build in Visual Studio** under **Package Restore**.</span></span>

   <span data-ttu-id="6d1e6-143">Für Projekte, die keine Projekte im SDK-Stil sind, müssen Sie zunächst **NuGet das Herunterladen fehlender Pakete erlauben** auswählen, um die Option für die automatische Wiederherstellung zu aktivieren.</span><span class="sxs-lookup"><span data-stu-id="6d1e6-143">For non-SDK-style projects, you first need to select **Allow NuGet to download missing packages** to enable the automatic restore option.</span></span>

1. <span data-ttu-id="6d1e6-144">Erstellen Sie das Projekt.</span><span class="sxs-lookup"><span data-stu-id="6d1e6-144">Build the project.</span></span>

   <span data-ttu-id="6d1e6-145">Wenn mindestens ein Paket immer noch nicht ordnungsgemäß installiert wurde, wird im **Projektmappen-Explorer** ein Fehlersymbol angezeigt.</span><span class="sxs-lookup"><span data-stu-id="6d1e6-145">If one or more individual packages still aren't installed properly, **Solution Explorer** shows an error icon.</span></span> <span data-ttu-id="6d1e6-146">Öffnen Sie das Kontextmenü, und wählen Sie **NuGet-Pakete verwalten** aus. Deinstallieren Sie anschließend die betreffenden Pakete über den **Paket-Manager**, und installieren Sie sie neu.</span><span class="sxs-lookup"><span data-stu-id="6d1e6-146">Right-click and select **Manage NuGet Packages**, and use **Package Manager** to uninstall and reinstall the affected packages.</span></span> <span data-ttu-id="6d1e6-147">Weitere Informationen finden Sie unter [Neuinstallieren und Aktualisieren von Paketen](../consume-packages/reinstalling-and-updating-packages.md).</span><span class="sxs-lookup"><span data-stu-id="6d1e6-147">For more information, see [Reinstall and update packages](../consume-packages/reinstalling-and-updating-packages.md)</span></span>

   <span data-ttu-id="6d1e6-148">Wenn die Fehlermeldungen „Dieses Projekt verweist auf mindestens ein NuGet-Paket, das auf diesem Computer fehlt.“ oder „One or more NuGet packages need to be restored but couldn't be because consent has not been granted.“ („Mindestens ein NuGet-Paket muss wiederhergestellt werden, dies wurde allerdings aufgrund der fehlenden Zustimmung verhindert.“) angezeigt werden, [aktivieren Sie die automatische Wiederherstellung](#enable-and-disable-package-restore-in-visual-studio).</span><span class="sxs-lookup"><span data-stu-id="6d1e6-148">If you see the error "This project references NuGet package(s) that are missing on this computer," or "One or more NuGet packages need to be restored but couldn't be because consent has not been granted," [enable automatic restore](#enable-and-disable-package-restore-in-visual-studio).</span></span> <span data-ttu-id="6d1e6-149">Weitere Informationen zu älteren Projekten finden Sie auch unter [Migrieren zur automatischen Paketwiederherstellung](#migrate-to-automatic-package-restore-visual-studio).</span><span class="sxs-lookup"><span data-stu-id="6d1e6-149">For older projects, also see [Migrate to automatic package restore](#migrate-to-automatic-package-restore-visual-studio).</span></span> <span data-ttu-id="6d1e6-150">Weitere Informationen finden Sie unter [Problembehandlung bei der Paketwiederherstellung](Package-restore-troubleshooting.md).</span><span class="sxs-lookup"><span data-stu-id="6d1e6-150">Also see [Package Restore troubleshooting](Package-restore-troubleshooting.md).</span></span>

### <a name="restore-packages-manually-using-visual-studio"></a><span data-ttu-id="6d1e6-151">Manuelles Wiederherstellen von Paketen mithilfe von Visual Studio</span><span class="sxs-lookup"><span data-stu-id="6d1e6-151">Restore packages manually using Visual Studio</span></span>

1. <span data-ttu-id="6d1e6-152">Aktivieren Sie die Paketwiederherstellung, indem Sie **Extras** > **Optionen** > **NuGet-Paket-Manager** auswählen.</span><span class="sxs-lookup"><span data-stu-id="6d1e6-152">Enable package restore by choosing **Tools** > **Options** > **NuGet Package Manager**.</span></span> <span data-ttu-id="6d1e6-153">Wählen Sie unter den **Paketwiederherstellungsoptionen** die Option **NuGet das Herunterladen fehlender Pakete erlauben** aus.</span><span class="sxs-lookup"><span data-stu-id="6d1e6-153">Under **Package Restore** options, select **Allow NuGet to download missing packages**.</span></span>

1. <span data-ttu-id="6d1e6-154">Klicken Sie im **Projektmappen-Explorer** mit der rechten Maustaste auf die Projektmappe, und wählen Sie dann **NuGet-Pakete wiederherstellen** aus.</span><span class="sxs-lookup"><span data-stu-id="6d1e6-154">In **Solution Explorer**, right click the solution and select **Restore NuGet Packages**.</span></span>

   <span data-ttu-id="6d1e6-155">Wenn mindestens ein Paket immer noch nicht ordnungsgemäß installiert wurde, wird im **Projektmappen-Explorer** ein Fehlersymbol angezeigt.</span><span class="sxs-lookup"><span data-stu-id="6d1e6-155">If one or more individual packages still aren't installed properly, **Solution Explorer** shows an error icon.</span></span> <span data-ttu-id="6d1e6-156">Öffnen Sie das Kontextmenü, und wählen Sie **NuGet-Pakete verwalten** aus. Deinstallieren Sie anschließend die betreffenden Pakete über den **Paket-Manager**, und installieren Sie sie erneut.</span><span class="sxs-lookup"><span data-stu-id="6d1e6-156">Right-click and select **Manage NuGet Packages**, and then use **Package Manager** to uninstall and reinstall the affected packages.</span></span> <span data-ttu-id="6d1e6-157">Weitere Informationen finden Sie unter [Neuinstallieren und Aktualisieren von Paketen](../consume-packages/reinstalling-and-updating-packages.md).</span><span class="sxs-lookup"><span data-stu-id="6d1e6-157">For more information, see [Reinstall and update packages](../consume-packages/reinstalling-and-updating-packages.md)</span></span>

   <span data-ttu-id="6d1e6-158">Wenn die Fehlermeldungen „Dieses Projekt verweist auf mindestens ein NuGet-Paket, das auf diesem Computer fehlt.“ oder „One or more NuGet packages need to be restored but couldn't be because consent has not been granted.“ („Mindestens ein NuGet-Paket muss wiederhergestellt werden, dies wurde allerdings aufgrund der fehlenden Zustimmung verhindert.“) angezeigt werden, [aktivieren Sie die automatische Wiederherstellung](#enable-and-disable-package-restore-in-visual-studio).</span><span class="sxs-lookup"><span data-stu-id="6d1e6-158">If you see the error "This project references NuGet package(s) that are missing on this computer," or "One or more NuGet packages need to be restored but couldn't be because consent has not been granted," [enable automatic restore](#enable-and-disable-package-restore-in-visual-studio).</span></span> <span data-ttu-id="6d1e6-159">Weitere Informationen zu älteren Projekten finden Sie auch unter [Migrieren zur automatischen Paketwiederherstellung](#migrate-to-automatic-package-restore-visual-studio).</span><span class="sxs-lookup"><span data-stu-id="6d1e6-159">For older projects, also see [Migrate to automatic package restore](#migrate-to-automatic-package-restore-visual-studio).</span></span> <span data-ttu-id="6d1e6-160">Weitere Informationen finden Sie unter [Problembehandlung bei der Paketwiederherstellung](Package-restore-troubleshooting.md).</span><span class="sxs-lookup"><span data-stu-id="6d1e6-160">Also see [Package Restore troubleshooting](Package-restore-troubleshooting.md).</span></span>

### <a name="enable-and-disable-package-restore-in-visual-studio"></a><span data-ttu-id="6d1e6-161">Aktivieren und Deaktivieren der Paketwiederherstellung in Visual Studio</span><span class="sxs-lookup"><span data-stu-id="6d1e6-161">Enable and disable package restore in Visual Studio</span></span>

<span data-ttu-id="6d1e6-162">Sie können die Paketwiederherstellung in Visual Studio primär über **Extras** > **Optionen** > **NuGet-Paket-Manager** steuern:</span><span class="sxs-lookup"><span data-stu-id="6d1e6-162">In Visual Studio, you control Package Restore primarily through **Tools** > **Options** > **NuGet Package Manager**:</span></span>

![Paketwiederherstellungsverhalten über Optionen im NuGet-Paket-Manager festlegen](media/Restore-01-AutoRestoreOptions.png)

- <span data-ttu-id="6d1e6-164">Die Option **NuGet das Herunterladen fehlender Pakete erlauben** steuert alle Paketwiederherstellungen durch die Änderung der `packageRestore/enabled`-Einstellung im Abschnitt [packageRestore](../reference/nuget-config-file.md#packagerestore-section) in der `NuGet.Config`-Datei (`%AppData%\NuGet\` unter Windows, `~/.nuget/NuGet/` unter Mac/Linux).</span><span class="sxs-lookup"><span data-stu-id="6d1e6-164">**Allow NuGet to download missing packages** controls all forms of package restore by changing the `packageRestore/enabled` setting in the [packageRestore section](../reference/nuget-config-file.md#packagerestore-section) of the `NuGet.Config` file, at `%AppData%\NuGet\` on Windows, or `~/.nuget/NuGet/` on Mac/Linux.</span></span> <span data-ttu-id="6d1e6-165">In Visual Studio sorgt diese Einstellungen dafür, dass der Befehl zur **Wiederherstellung von NuGet-Paketen** im Kontextmenü der Projektmappe ausgeführt werden kann.</span><span class="sxs-lookup"><span data-stu-id="6d1e6-165">This setting also enables the **Restore NuGet Packages** command on the solution's context menu in Visual Studio, .</span></span>

    ```xml
    <configuration>
        <packageRestore>
            <!-- The 'enabled' key is True when the "Allow NuGet to download missing packages" checkbox is set.
                 Clearing the box sets this to False, disabling command-line, automatic, and MSBuild-integrated restore. -->
            <add key="enabled" value="True" />
        </packageRestore>
    </configuration>
    ```
    
  > [!Note]
  > <span data-ttu-id="6d1e6-166">Die `packageRestore/enabled`-Einstellung kann global außer Kraft gesetzt werden, indem die Umgebungsvariable **EnableNuGetPackageRestore** auf TRUE oder FALSE festgelegt wird, bevor Visual Studio gestartet oder mit einem Build begonnen wird.</span><span class="sxs-lookup"><span data-stu-id="6d1e6-166">To globally override the `packageRestore/enabled` setting, set the environment variable **EnableNuGetPackageRestore** with a value of True or False before launching Visual Studio or starting a build.</span></span>

- <span data-ttu-id="6d1e6-167">**Automatisch auf fehlende Pakete während des Builds in Visual Studio überprüfen** steuert die automatische Wiederherstellung, indem die Einstellung `packageRestore/automatic` im Abschnitt [packageRestore](../reference/nuget-config-file.md#packagerestore-section) in der Datei `NuGet.Config` geändert wird.</span><span class="sxs-lookup"><span data-stu-id="6d1e6-167">**Automatically check for missing packages during build in Visual Studio** controls automatic restore by changing the `packageRestore/automatic` setting in the [packageRestore section](../reference/nuget-config-file.md#packagerestore-section) of the `NuGet.Config` file.</span></span> <span data-ttu-id="6d1e6-168">Wenn diese Option auf TRUE festgelegt ist, werden automatisch fehlende Pakete wiederhergestellt, wenn ein Build über Visual Studio ausgeführt wird.</span><span class="sxs-lookup"><span data-stu-id="6d1e6-168">When this option is set to True, running a build from Visual Studio automatically restores any missing packages.</span></span> <span data-ttu-id="6d1e6-169">Diese Einstellung wirkt sich nicht auf Builds aus, die über die MSBuild-Befehlszeile ausgeführt werden.</span><span class="sxs-lookup"><span data-stu-id="6d1e6-169">This setting doesn't affect builds run from the MSBuild command line.</span></span>

    ```xml
    ...
    <configuration>
        <packageRestore>
            <!-- The 'automatic' key is set to True when the "Automatically check for missing packages during
                 build in Visual Studio" checkbox is set. Clearing the box sets this to False and disables
                 automatic restore. -->
            <add key="automatic" value="True" />
        </packageRestore>
    </configuration>
    ```

<span data-ttu-id="6d1e6-170">Ein Entwickler oder ein Unternehmen kann die Konfigurationen der globalen `nuget.config`-Datei hinzufügen, um die Paketwiederherstellung für alle Benutzer auf einem Computer zu aktivieren oder zu deaktivieren.</span><span class="sxs-lookup"><span data-stu-id="6d1e6-170">To enable or disable Package Restore for all users on a computer, a developer or company can add the configuration settings to the global `nuget.config` file.</span></span> <span data-ttu-id="6d1e6-171">Die globale `nuget.config`-Datei befindet sich unter Windows unter `%ProgramData%\NuGet\Config`, manchmal in einem spezifischen `\{IDE}\{Version}\{SKU}\`-Visual Studio-Ordner, und unter Mac/Linux unter `~/.local/share`.</span><span class="sxs-lookup"><span data-stu-id="6d1e6-171">The global `nuget.config` is in Windows at `%ProgramData%\NuGet\Config`, sometimes under a specific `\{IDE}\{Version}\{SKU}\` Visual Studio folder, or in Mac/Linux at `~/.local/share`.</span></span> <span data-ttu-id="6d1e6-172">Einzelne Benutzer können dann nach Bedarf die Wiederherstellung auf Projektebene aktivieren.</span><span class="sxs-lookup"><span data-stu-id="6d1e6-172">Individual users can then selectively enable restore as needed on a project level.</span></span> <span data-ttu-id="6d1e6-173">Weitere Informationen zur Vorgehensweise von NuGet bei der Priorisierung mehrerer Konfigurationsdateien finden Sie unter [Konfigurieren des NuGet-Verhaltens](../consume-packages/configuring-nuget-behavior.md#how-settings-are-applied).</span><span class="sxs-lookup"><span data-stu-id="6d1e6-173">For more details on how NuGet prioritizes multiple config files, see [Common NuGet configurations](../consume-packages/configuring-nuget-behavior.md#how-settings-are-applied).</span></span>

> [!Important]
> <span data-ttu-id="6d1e6-174">Sie müssen Visual Studio neu starten, wenn Sie die `packageRestore`-Einstellungen direkt in `nuget.config` bearbeiten, damit im Dialogfeld **Optionen** die richtigen Werte angezeigt werden.</span><span class="sxs-lookup"><span data-stu-id="6d1e6-174">If you edit the `packageRestore` settings directly in `nuget.config`, restart Visual Studio, so that the **Options** dialog box shows the current values.</span></span>

### <a name="choose-default-package-management-format"></a><span data-ttu-id="6d1e6-175">Auswählen des Standardformats für die Paketverwaltung</span><span class="sxs-lookup"><span data-stu-id="6d1e6-175">Choose default package management format</span></span>

![Standardformat für Paketverwaltung über das NuGet-Paket-Manager-Format steuern](media/Restore-02-PackageFormatOptions.png)

<span data-ttu-id="6d1e6-177">In NuGet gibt es zwei Formate, in denen ein Projekt Pakete verwenden kann: [`PackageReference`](package-references-in-project-files.md) und [`packages.config`](../reference/packages-config.md).</span><span class="sxs-lookup"><span data-stu-id="6d1e6-177">NuGet has two formats in which a project may use packages: [`PackageReference`](package-references-in-project-files.md) and [`packages.config`](../reference/packages-config.md).</span></span> <span data-ttu-id="6d1e6-178">Das Standardformat kann in der Dropdownliste unter der Überschrift **Paketverwaltung** ausgewählt werden.</span><span class="sxs-lookup"><span data-stu-id="6d1e6-178">The default format can be selected from the drop-down under the **Package Management** heading.</span></span> <span data-ttu-id="6d1e6-179">Eine Option, die angezeigt werden soll, wenn das erste Paket in einem Projekt installiert wird, ist ebenfalls verfügbar.</span><span class="sxs-lookup"><span data-stu-id="6d1e6-179">An option to be prompted when the first package is installed in a project is also available.</span></span>

> [!Note]
> <span data-ttu-id="6d1e6-180">Wenn ein Projekt nicht beide Paketverwaltungsformate unterstützt, wird das Paketverwaltungsformat verwendet, das mit dem Projekt kompatibel ist. Hierbei handelt es sich daher möglicherweise nicht um die Standardeinstellung in den Optionen.</span><span class="sxs-lookup"><span data-stu-id="6d1e6-180">If a project does not support both package management formats, the package management format used will be the one that's compatible with the project, and therefore may not be the default set in the options.</span></span> <span data-ttu-id="6d1e6-181">Außerdem werden Sie von NuGet bei der ersten Paketinstallation nicht zur Auswahl aufgefordert, selbst wenn diese Option im Optionsfenster ausgewählt ist.</span><span class="sxs-lookup"><span data-stu-id="6d1e6-181">Additionally, NuGet will not prompt for selection on first package installation, even if the option is selected in the options window.</span></span>
>
> <span data-ttu-id="6d1e6-182">Wenn die Paket-Manager-Konsole verwendet wird, um das erste Paket in einem Projekt zu installieren, werden Sie von NuGet nicht zur Auswahl des Formats aufgefordert, selbst wenn diese Option im Optionsfenster ausgewählt ist.</span><span class="sxs-lookup"><span data-stu-id="6d1e6-182">If Package Manager Console is used to install the first package in a project, NuGet will not prompt for format selection, even if the option is selected in the options window.</span></span>

## <a name="restore-using-the-dotnet-cli"></a><span data-ttu-id="6d1e6-183">Wiederherstellung mithilfe der dotnet-CLI</span><span class="sxs-lookup"><span data-stu-id="6d1e6-183">Restore using the dotnet CLI</span></span>

[!INCLUDE [restore-dotnet-cli](includes/restore-dotnet-cli.md)]

> [!IMPORTANT]
> <span data-ttu-id="6d1e6-184">Zum Hinzufügen eines fehlenden Paketverweises zur Projektdatei verwenden Sie [dotnet add package](/dotnet/core/tools/dotnet-add-package?tabs=netcore2x). Dabei wird auch der Befehl `restore` ausgeführt.</span><span class="sxs-lookup"><span data-stu-id="6d1e6-184">To add a missing package reference to the project file, use [dotnet add package](/dotnet/core/tools/dotnet-add-package?tabs=netcore2x), which also runs the `restore` command.</span></span>

## <a name="restore-using-the-nugetexe-cli"></a><span data-ttu-id="6d1e6-185">Wiederherstellung mithilfe der nuget.exe-CLI</span><span class="sxs-lookup"><span data-stu-id="6d1e6-185">Restore using the nuget.exe CLI</span></span>

[!INCLUDE [restore-nuget-exe-cli](includes/restore-nuget-exe-cli.md)]

> [!IMPORTANT]
> <span data-ttu-id="6d1e6-186">Der Befehl `restore` ändert keine Projektdatei oder *packages.config*. Um eine Abhängigkeit hinzuzufügen, fügen Sie ein Paket entweder über den Paket-Manager oder die Konsole in Visual Studio hinzu. Als dritte Möglichkeit können Sie *packages.config* ändern und anschließend `install` oder `restore` ausführen.</span><span class="sxs-lookup"><span data-stu-id="6d1e6-186">The `restore` command does not modify a project file or *packages.config*. To add a dependency, either add a package through the Package Manager UI or Console in Visual Studio, or modify *packages.config* and then run either `install` or `restore`.</span></span>

## <a name="restore-using-msbuild"></a><span data-ttu-id="6d1e6-187">Wiederherstellung mit MSBuild</span><span class="sxs-lookup"><span data-stu-id="6d1e6-187">Restore using MSBuild</span></span>

<span data-ttu-id="6d1e6-188">Verwenden Sie den Befehl [msbuild -t:restore](../reference/msbuild-targets.md#restore-target), um Pakete wiederherzustellen, die in der Projektdatei aufgelistet sind (siehe [PackageReference](package-references-in-project-files.md)). Mit MSBuild 16.5+ können Sie auch Projekte wiederherstellen, die in `packages.config` aufgelistet sind.</span><span class="sxs-lookup"><span data-stu-id="6d1e6-188">Use the [msbuild -t:restore](../reference/msbuild-targets.md#restore-target) command to restore packages listed in the project file (see [PackageReference](package-references-in-project-files.md)) and starting with MSBuild 16.5+, `packages.config` projects.</span></span>

 <span data-ttu-id="6d1e6-189">Diese Befehl ist nur in NuGet 4.x und höher und MSBuild 15.1 und höher verfügbar. Diese Versionen sind in Visual Studio 2017 und höher enthalten.</span><span class="sxs-lookup"><span data-stu-id="6d1e6-189">This command is available only in NuGet 4.x+ and MSBuild 15.1+, which are included with Visual Studio 2017 and higher versions.</span></span>
<span data-ttu-id="6d1e6-190">Ab MSBuild 16.5 kann dieser Befehl auch `packages.config`-basierte Projekte wiederherstellen, wenn diese mit `-p:RestorePackagesConfig=true` ausgeführt werden.</span><span class="sxs-lookup"><span data-stu-id="6d1e6-190">Starting with MSBuild 16.5+, this command can also restore `packages.config` based projects when run with `-p:RestorePackagesConfig=true`.</span></span>

1. <span data-ttu-id="6d1e6-191">Öffnen Sie eine Developer-Eingabeaufforderung (geben Sie **Developer-Eingabeaufforderung** im **Suchfeld** ein).</span><span class="sxs-lookup"><span data-stu-id="6d1e6-191">Open a Developer command prompt (In the **Search** box, type **Developer command prompt**).</span></span>

   <span data-ttu-id="6d1e6-192">In der Regel sollten Sie die „Developer-Eingabeaufforderung für Visual Studio“ über das **Startmenü** starten, da dieses mit allen nötigen Pfaden für MSBuild konfiguriert ist.</span><span class="sxs-lookup"><span data-stu-id="6d1e6-192">You typically want to start the Developer Command Prompt for Visual Studio from the **Start** menu, as it will be configured with all the necessary paths for MSBuild.</span></span>

2. <span data-ttu-id="6d1e6-193">Wechseln Sie zu dem Ordner, der die Projektdatei enthält, und geben Sie den folgenden Befehl ein.</span><span class="sxs-lookup"><span data-stu-id="6d1e6-193">Switch to the folder containing the project file and type the following command.</span></span>

   ```cmd
   # Uses the project file in the current folder by default
   msbuild -t:restore
   ```

3. <span data-ttu-id="6d1e6-194">Geben Sie den folgenden Befehl ein, um das Projekt erneut zu erstellen.</span><span class="sxs-lookup"><span data-stu-id="6d1e6-194">Type the following command to rebuild the project.</span></span>

   ```cmd
   msbuild
   ```

   <span data-ttu-id="6d1e6-195">Stellen Sie sicher, dass die MSBuild-Ausgabe angibt, dass der Build erfolgreich abgeschlossen wurde.</span><span class="sxs-lookup"><span data-stu-id="6d1e6-195">Make sure that the MSBuild output indicates that the build completed successfully.</span></span>
   
> [!Note]
> <span data-ttu-id="6d1e6-196">MSBuild verfügt über einen `-restore`-Switch, der `Restore` ausführt, das Projekt erneut lädt und dann erstellt.</span><span class="sxs-lookup"><span data-stu-id="6d1e6-196">msbuild has a `-restore` switch which will run `Restore`, reload the project, and then build.</span></span> <span data-ttu-id="6d1e6-197">Weitere Informationen finden Sie unter [Wiederherstellen und Erstellen mit einem MSBuild-Befehl](../reference/msbuild-targets.md#restoring-and-building-with-one-msbuild-command).</span><span class="sxs-lookup"><span data-stu-id="6d1e6-197">See [Restoring and building with one MSBuild command](../reference/msbuild-targets.md#restoring-and-building-with-one-msbuild-command).</span></span>

```cmd
# Will restore the project, then build, since build is the default target.
msbuild -restore
```

## <a name="restore-using-azure-pipelines"></a><span data-ttu-id="6d1e6-198">Wiederherstellung mit Azure Pipelines</span><span class="sxs-lookup"><span data-stu-id="6d1e6-198">Restore using Azure Pipelines</span></span>

<span data-ttu-id="6d1e6-199">Fügen Sie beim Erstellen einer Builddefinition in Azure Pipelines den [NuGet-](/azure/devops/pipelines/tasks/package/nuget#restore-nuget-packages) oder den [.NET Core-Wiederherstellungstask](/azure/devops/pipelines/tasks/build/dotnet-core-cli?view=azure-devops) vor jeglichen Buildtasks in die Definition ein.</span><span class="sxs-lookup"><span data-stu-id="6d1e6-199">When you create a build definition in Azure Pipelines, include the NuGet [restore](/azure/devops/pipelines/tasks/package/nuget#restore-nuget-packages) or .NET Core [restore](/azure/devops/pipelines/tasks/build/dotnet-core-cli?view=azure-devops) task in the definition before any build tasks.</span></span> <span data-ttu-id="6d1e6-200">Einige Buildvorlagen enthalten standardmäßig den Wiederherstellungstask.</span><span class="sxs-lookup"><span data-stu-id="6d1e6-200">Some build templates include the restore task by default.</span></span>

## <a name="restore-using-azure-devops-server"></a><span data-ttu-id="6d1e6-201">Wiederherstellung mit Azure DevOps Server</span><span class="sxs-lookup"><span data-stu-id="6d1e6-201">Restore using Azure DevOps Server</span></span>

<span data-ttu-id="6d1e6-202">In Azure DevOps Server und TFS 2013 und höher werden Pakete automatisch beim Build wiederhergestellt, wenn Sie eine Team Build-Vorlage für TFS 2013 oder höher verwenden.</span><span class="sxs-lookup"><span data-stu-id="6d1e6-202">Azure DevOps Server and TFS 2013 and later automatically restore packages during build, if you're using a TFS 2013 or later Team Build template.</span></span> <span data-ttu-id="6d1e6-203">Sie können für frühere TFS-Versionen einen Buildschritt einbeziehen, der eine Befehlszeilenwiederherstellungsoption ausführt, oder Sie können optional die Buildvorlage zu einer späteren Version migrieren.</span><span class="sxs-lookup"><span data-stu-id="6d1e6-203">For earlier TFS versions, you can include a build step to run a command-line restore option, or optionally migrate the build template to a later version.</span></span> <span data-ttu-id="6d1e6-204">Weitere Informationen finden Sie unter [Einrichten der Paketwiederherstellung mit Team Foundation Build](../consume-packages/team-foundation-build.md).</span><span class="sxs-lookup"><span data-stu-id="6d1e6-204">For more information, see [Set up package restore with Team Foundation Build](../consume-packages/team-foundation-build.md).</span></span>

## <a name="constrain-package-versions-with-restore"></a><span data-ttu-id="6d1e6-205">Einschränken der Paketversionen mit der Wiederherstellung</span><span class="sxs-lookup"><span data-stu-id="6d1e6-205">Constrain package versions with restore</span></span>

<span data-ttu-id="6d1e6-206">Wenn NuGet Pakete über eine beliebige Methode wiederherstellt, berücksichtigt es alle in `packages.config` oder der Projektdatei angegebenen Einschränkungen:</span><span class="sxs-lookup"><span data-stu-id="6d1e6-206">When NuGet restores packages through any method, it honors any constraints you specified in `packages.config` or the project file:</span></span>

- <span data-ttu-id="6d1e6-207">Sie können in `packages.config` einen Versionsbereich in der `allowedVersion`-Eigenschaft der Abhängigkeit angeben.</span><span class="sxs-lookup"><span data-stu-id="6d1e6-207">In `packages.config`, you can specify a version range in the `allowedVersion` property of the dependency.</span></span> <span data-ttu-id="6d1e6-208">Weitere Informationen finden Sie unter [Neuinstallieren und Aktualisieren von Paketen](../consume-packages/reinstalling-and-updating-packages.md#constraining-upgrade-versions).</span><span class="sxs-lookup"><span data-stu-id="6d1e6-208">See [Constrain upgrade versions](../consume-packages/reinstalling-and-updating-packages.md#constraining-upgrade-versions) for more information.</span></span> <span data-ttu-id="6d1e6-209">Zum Beispiel:</span><span class="sxs-lookup"><span data-stu-id="6d1e6-209">For example:</span></span>

    ```xml
    <package id="Newtonsoft.json" version="6.0.4" allowedVersions="[6,7)" />
    ```

- <span data-ttu-id="6d1e6-210">Sie können in einer Projektdatei PackageReference verwenden, um den Bereich einer Abhängigkeit direkt anzugeben.</span><span class="sxs-lookup"><span data-stu-id="6d1e6-210">In a project file, you can use PackageReference to specify a dependency's range directly.</span></span> <span data-ttu-id="6d1e6-211">Zum Beispiel:</span><span class="sxs-lookup"><span data-stu-id="6d1e6-211">For example:</span></span>

    ```xml
    <PackageReference Include="Newtonsoft.json" Version="[6, 7)" />
    ```

<span data-ttu-id="6d1e6-212">Verwenden Sie in jedem Fall die unter [Paketversionsverwaltung](../concepts/package-versioning.md) beschriebene Notation.</span><span class="sxs-lookup"><span data-stu-id="6d1e6-212">In all cases, use the notation described in [Package versioning](../concepts/package-versioning.md).</span></span>

## <a name="force-restore-from-package-sources"></a><span data-ttu-id="6d1e6-213">Erzwingen der Wiederherstellung aus Paketquellen</span><span class="sxs-lookup"><span data-stu-id="6d1e6-213">Force restore from package sources</span></span>

<span data-ttu-id="6d1e6-214">Standardmäßig werden für NuGet-Wiederherstellungsvorgänge Pakete aus den Ordnern *global-packages* und *http-cache* verwendet, die unter [Verwalten von globalen Pakete-, Cache- und temporären Ordnern](managing-the-global-packages-and-cache-folders.md) beschrieben werden.</span><span class="sxs-lookup"><span data-stu-id="6d1e6-214">By default, NuGet restore operations use packages from the *global-packages* and *http-cache* folders, which are described in [Manage the global packages and cache folders](managing-the-global-packages-and-cache-folders.md).</span></span>

<span data-ttu-id="6d1e6-215">Um die Verwendung des Ordners *global-packages* zu vermeiden, gehen Sie wie folgt vor:</span><span class="sxs-lookup"><span data-stu-id="6d1e6-215">To avoid using the *global-packages* folder, do one of the following:</span></span>

- <span data-ttu-id="6d1e6-216">Leeren Sie den Ordner mit `nuget locals global-packages -clear` oder `dotnet nuget locals global-packages --clear`.</span><span class="sxs-lookup"><span data-stu-id="6d1e6-216">Clear the folder using `nuget locals global-packages -clear` or `dotnet nuget locals global-packages --clear`.</span></span>
- <span data-ttu-id="6d1e6-217">Ändern Sie vorübergehend den Speicherort des Ordners *global-packages* vor der Wiederherstellung mit einer der folgenden Methoden:</span><span class="sxs-lookup"><span data-stu-id="6d1e6-217">Temporarily change the location of the *global-packages* folder before the restore operation, using one of the following methods:</span></span>
  - <span data-ttu-id="6d1e6-218">Legen Sie die Umgebungsvariable NUGET_PACKAGES auf einen anderen Ordner fest.</span><span class="sxs-lookup"><span data-stu-id="6d1e6-218">Set the NUGET_PACKAGES environment variable to a different folder.</span></span>
  - <span data-ttu-id="6d1e6-219">Erstellen Sie eine `NuGet.Config`-Datei, die `globalPackagesFolder` (bei Verwendung von PackageReference) oder `repositoryPath` (bei Verwendung von `packages.config`) auf einen anderen Ordner festlegt.</span><span class="sxs-lookup"><span data-stu-id="6d1e6-219">Create a `NuGet.Config` file that sets `globalPackagesFolder` (if using PackageReference) or `repositoryPath` (if using `packages.config`) to a different folder.</span></span> <span data-ttu-id="6d1e6-220">Weitere Informationen finden Sie unter [nuget.config reference (nuget.config-Referenz)](../reference/nuget-config-file.md#config-section).</span><span class="sxs-lookup"><span data-stu-id="6d1e6-220">For more information, see [configuration settings](../reference/nuget-config-file.md#config-section).</span></span>
  - <span data-ttu-id="6d1e6-221">Nur MSBuild: Geben Sie einen anderen Ordner mit der Eigenschaft `RestorePackagesPath` an.</span><span class="sxs-lookup"><span data-stu-id="6d1e6-221">MSBuild only: Specify a different folder with the `RestorePackagesPath` property.</span></span>

<span data-ttu-id="6d1e6-222">Um die Verwendung des Caches für HTTP-Quellen zu vermeiden, gehen Sie wie folgt vor:</span><span class="sxs-lookup"><span data-stu-id="6d1e6-222">To avoid using the cache for HTTP sources, do one of the following:</span></span>

- <span data-ttu-id="6d1e6-223">Verwenden Sie die Option `-NoCache` mit `nuget restore` oder die Option `--no-cache` mit `dotnet restore`.</span><span class="sxs-lookup"><span data-stu-id="6d1e6-223">Use the `-NoCache` option with `nuget restore`, or the `--no-cache` option with `dotnet restore`.</span></span> <span data-ttu-id="6d1e6-224">Diese Optionen haben keinen Einfluss auf die Wiederherstellungsvorgänge, die über die Visual Studio-Paket-Manager-Benutzeroberfläche oder -Konsole durchgeführt werden.</span><span class="sxs-lookup"><span data-stu-id="6d1e6-224">These options don't affect restore operations through the Visual Studio Package Manager or console.</span></span>
- <span data-ttu-id="6d1e6-225">Bereinigen Sie den Cache mit `nuget locals http-cache -clear` oder `dotnet nuget locals http-cache --clear`.</span><span class="sxs-lookup"><span data-stu-id="6d1e6-225">Clear the cache using `nuget locals http-cache -clear` or `dotnet nuget locals http-cache --clear`.</span></span>
- <span data-ttu-id="6d1e6-226">Legen Sie die Umgebungsvariable NUGET_HTTP_CACHE_PATH vorübergehend auf einen anderen Ordner fest.</span><span class="sxs-lookup"><span data-stu-id="6d1e6-226">Temporarily set the NUGET_HTTP_CACHE_PATH environment variable to a different folder.</span></span>

## <a name="migrate-to-automatic-package-restore-visual-studio"></a><span data-ttu-id="6d1e6-227">Migrieren zur automatischen Paketwiederherstellung (Visual Studio)</span><span class="sxs-lookup"><span data-stu-id="6d1e6-227">Migrate to automatic package restore (Visual Studio)</span></span>

<span data-ttu-id="6d1e6-228">Für NuGet 2.6 und früher wurde die in MSBuild integrierte Paketwiederherstellung unterstützt; dies ist jedoch nicht mehr der Fall.</span><span class="sxs-lookup"><span data-stu-id="6d1e6-228">For NuGet 2.6 and earlier, an MSBuild-integrated package restore was previously supported but that is no longer true.</span></span> <span data-ttu-id="6d1e6-229">(Die Aktivierung erfolgte in der Regel durch Klicken mit der rechten Maustaste auf eine Projektpappe in Visual Studio und Auswählen von **NuGet-Paketwiederherstellung aktivieren**.)</span><span class="sxs-lookup"><span data-stu-id="6d1e6-229">(It was typically enabled by right-clicking a solution in Visual Studio and selecting **Enable NuGet Package Restore**).</span></span> <span data-ttu-id="6d1e6-230">Wenn in Ihrem Projekt die veraltete in MSBuild integrierte Paketwiederherstellung verwendet wird, migrieren Sie zur automatischen Paketwiederherstellung.</span><span class="sxs-lookup"><span data-stu-id="6d1e6-230">If your project uses the deprecated MSBuild-integrated package restore, please migrate to automatic package restore.</span></span>

<span data-ttu-id="6d1e6-231">Projekte, in denen die in MSBuild integrierte Paketwiederherstellung verwendet wird, enthalten in der Regel den Ordner *.nuget* mit drei Dateien: *NuGet.config*, *nuget.exe* und *NuGet.targets*.</span><span class="sxs-lookup"><span data-stu-id="6d1e6-231">Projects that use MSBuild-Integrated package restore typically contain a *.nuget* folder with three files: *NuGet.config*, *nuget.exe*, and *NuGet.targets*.</span></span> <span data-ttu-id="6d1e6-232">Wenn die Datei *NuGet.targets* vorhanden ist, wird in NuGet weiterhin versucht, die in MSBuild integrierte Paketwiederherstellung zu verwenden. Deshalb muss diese Datei während der Migration entfernt werden.</span><span class="sxs-lookup"><span data-stu-id="6d1e6-232">The presence of a *NuGet.targets* file determines whether NuGet will continue to use the MSBuild-integrated approach, so this file must be removed during the migration.</span></span>

<span data-ttu-id="6d1e6-233">So migrieren Sie zur automatischen Paketwiederherstellung:</span><span class="sxs-lookup"><span data-stu-id="6d1e6-233">To migrate to automatic package restore:</span></span>

1. <span data-ttu-id="6d1e6-234">Schließen Sie Visual Studio.</span><span class="sxs-lookup"><span data-stu-id="6d1e6-234">Close Visual Studio.</span></span>
2. <span data-ttu-id="6d1e6-235">Löschen Sie *.nuget/nuget.exe* und *.nuget/NuGet.targets*.</span><span class="sxs-lookup"><span data-stu-id="6d1e6-235">Delete *.nuget/nuget.exe* and *.nuget/NuGet.targets*.</span></span>
3. <span data-ttu-id="6d1e6-236">Entfernen Sie für jede Projektdatei das `<RestorePackages>`-Element, und entfernen Sie alle Verweise auf *NuGet.targets*.</span><span class="sxs-lookup"><span data-stu-id="6d1e6-236">For each project file, remove the `<RestorePackages>` element and remove any reference to *NuGet.targets*.</span></span>

<span data-ttu-id="6d1e6-237">So testen Sie die automatische Paketwiederherstellung:</span><span class="sxs-lookup"><span data-stu-id="6d1e6-237">To test the automatic package restore:</span></span>

1. <span data-ttu-id="6d1e6-238">Entfernen Sie den Ordner *packages* aus der Projektmappe.</span><span class="sxs-lookup"><span data-stu-id="6d1e6-238">Remove the *packages* folder from the solution.</span></span>
2. <span data-ttu-id="6d1e6-239">Öffnen Sie die Projektmappe in Visual Studio, und starten Sie einen Buildvorgang.</span><span class="sxs-lookup"><span data-stu-id="6d1e6-239">Open the solution in Visual Studio and start a build.</span></span>

   <span data-ttu-id="6d1e6-240">Durch die automatische Paketwiederherstellung wird jedes Abhängigkeitspaket heruntergeladen und installiert, ohne es der Quellcodeverwaltung hinzuzufügen.</span><span class="sxs-lookup"><span data-stu-id="6d1e6-240">Automatic package restore should download and install each dependency package, without adding them to source control.</span></span>

## <a name="troubleshooting"></a><span data-ttu-id="6d1e6-241">Problembehandlung</span><span class="sxs-lookup"><span data-stu-id="6d1e6-241">Troubleshooting</span></span>

<span data-ttu-id="6d1e6-242">Informationen zur Problembehandlung finden Sie unter [Problembehandlung bei der Paketwiederherstellung](Package-restore-troubleshooting.md).</span><span class="sxs-lookup"><span data-stu-id="6d1e6-242">See [Troubleshoot package restore](Package-restore-troubleshooting.md).</span></span>
