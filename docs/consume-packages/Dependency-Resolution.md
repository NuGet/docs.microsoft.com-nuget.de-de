---
title: Auflösung von NuGet-Paketabhängigkeiten
description: Details zum Vorgang, bei dem die Abhängigkeiten eines NuGet-Pakets aufgelöst und in NuGet 2.x und NuGet 3.x und höher installiert werden.
author: karann-msft
ms.author: karann
ms.date: 08/14/2017
ms.topic: conceptual
ms.openlocfilehash: 178af1975fc4e6fcde8988d773812820f1f1bb84
ms.sourcegitcommit: f9e39ff9ca19ba4a26e52b8a5e01e18eb0de5387
ms.translationtype: HT
ms.contentlocale: de-DE
ms.lasthandoff: 07/24/2019
ms.locfileid: "68433360"
---
# <a name="how-nuget-resolves-package-dependencies"></a><span data-ttu-id="5ae71-103">Auflösung von Paketabhängigkeiten durch NuGet</span><span class="sxs-lookup"><span data-stu-id="5ae71-103">How NuGet resolves package dependencies</span></span>

<span data-ttu-id="5ae71-104">Bei jeder Installation oder Neuinstallation eines Pakets, was auch die Installation als Bestandteil eines [Wiederherstellungsprozesses](../consume-packages/package-restore.md) umfasst, installiert NuGet außerdem zusätzliche Pakete, von denen das ursprüngliche Paket abhängig ist.</span><span class="sxs-lookup"><span data-stu-id="5ae71-104">Any time a package is installed or reinstalled, which includes being installed as part of a [restore](../consume-packages/package-restore.md) process, NuGet also installs any additional packages on which that first package depends.</span></span>

<span data-ttu-id="5ae71-105">Diese unmittelbaren Abhängigkeiten verfügen möglicherweise ebenfalls über Abhängigkeiten, die über weitere Abhängigkeiten verfügen, usw.</span><span class="sxs-lookup"><span data-stu-id="5ae71-105">Those immediate dependencies might then also have dependencies on their own, which can continue to an arbitrary depth.</span></span> <span data-ttu-id="5ae71-106">Dadurch entsteht ein sogenanntes *Abhängigkeitsdiagramm*, das die Beziehungen zwischen den Paketen auf sämtlichen Ebenen darstellt.</span><span class="sxs-lookup"><span data-stu-id="5ae71-106">This produces what's called a *dependency graph* that describes the relationships between packages at all levels.</span></span>

<span data-ttu-id="5ae71-107">Wenn mehrere Pakete über dieselbe Abhängigkeit verfügen, kann in dem Diagramm auch mehrmals dieselbe Paket-ID angezeigt werden, möglicherweise mit verschiedenen Versionseinschränkungen.</span><span class="sxs-lookup"><span data-stu-id="5ae71-107">When multiple packages have the same dependency, then the same package ID can appear in the graph multiple times, potentially with different version constraints.</span></span> <span data-ttu-id="5ae71-108">Trotzdem kann nur eine Version eines vorhandenen Pakets in einem Projekt verwendet werden, sodass NuGet auswählen muss, welche Version verwendet wird.</span><span class="sxs-lookup"><span data-stu-id="5ae71-108">However, only one version of a given package can be used in a project, so NuGet must choose which version is used.</span></span> <span data-ttu-id="5ae71-109">Der genaue Prozess ist abhängig vom verwendeten Paketverwaltungsformat.</span><span class="sxs-lookup"><span data-stu-id="5ae71-109">The exact process depends on the package management format being used.</span></span>

## <a name="dependency-resolution-with-packagereference"></a><span data-ttu-id="5ae71-110">Abhängigkeitsauflösung mit PackageReference</span><span class="sxs-lookup"><span data-stu-id="5ae71-110">Dependency resolution with PackageReference</span></span>

<span data-ttu-id="5ae71-111">Bei der Installation von Paketen in Projekte, die das PackageReference-Format verwenden, fügt NuGet Verweise auf ein flaches Paketdiagramm in der entsprechenden Datei hinzu und löst Konflikte auf, bevor sie entstehen.</span><span class="sxs-lookup"><span data-stu-id="5ae71-111">When installing packages into projects using the PackageReference format, NuGet adds references to a flat package graph in the appropriate file and resolves conflicts ahead of time.</span></span> <span data-ttu-id="5ae71-112">Dieser Vorgang wird als *transitive Wiederherstellung* bezeichnet.</span><span class="sxs-lookup"><span data-stu-id="5ae71-112">This process is referred to as *transitive restore*.</span></span> <span data-ttu-id="5ae71-113">Für die erneute Installation oder die Wiederherstellung müssen dann nur noch die in dem Diagramm aufgeführten Pakete heruntergeladen werden, wodurch schnellere und zuverlässigere Builds erstellt werden.</span><span class="sxs-lookup"><span data-stu-id="5ae71-113">Reinstalling or restoring packages is then a process of downloading the packages listed in the graph, resulting in faster and more predictable builds.</span></span> <span data-ttu-id="5ae71-114">Sie können auch Platzhalterversionen (unverankert) wie 2.8.\* nutzen, um speicherintensive und fehlernanfällige Aufrufe von `nuget update` auf den Clientcomputern und Buildservern zu vermeiden.</span><span class="sxs-lookup"><span data-stu-id="5ae71-114">You can also take advantage of wildcard (floating) versions, such as 2.8.\*, avoiding expensive and error prone calls to `nuget update` on the client machines and build servers.</span></span>

<span data-ttu-id="5ae71-115">Wenn der Wiederherstellungsprozess von NuGet vor einem Buildvorgang ausgeführt wird, löst dieser zuerst Abhängigkeiten im Arbeitsspeicher aus und schreibt das resultierende Diagramm dann in eine Datei mit der Bezeichnung `project.assets.json`.</span><span class="sxs-lookup"><span data-stu-id="5ae71-115">When the NuGet restore process runs prior to a build, it resolves dependencies first in memory, then writes the resulting graph to a file called `project.assets.json`.</span></span> <span data-ttu-id="5ae71-116">Außerdem werden die aufgelösten Abhängigkeiten in eine Sperrdatei mit dem Namen `packages.lock.json` geschrieben, wenn die Funktion [ der Sperrdatei aktiviert ist](https://docs.microsoft.com/en-us/nuget/consume-packages/package-references-in-project-files#locking-dependencies).</span><span class="sxs-lookup"><span data-stu-id="5ae71-116">It also writes the resolved dependencies to a lock file named `packages.lock.json`, if the [lock file functionality is enabled](https://docs.microsoft.com/en-us/nuget/consume-packages/package-references-in-project-files#locking-dependencies).</span></span>
<span data-ttu-id="5ae71-117">Die Ressourcendatei befindet sich unter `MSBuildProjectExtensionsPath`, was standardmäßig der Objektordner des Projekts ist.</span><span class="sxs-lookup"><span data-stu-id="5ae71-117">The assets file is located at `MSBuildProjectExtensionsPath`, which defaults to the project's 'obj' folder.</span></span> <span data-ttu-id="5ae71-118">MSBuild liest diese Datei und übersetzt sie in mehrere Ordner, in denen sich mögliche Verweise befinden, und fügt diese dann der Projektstruktur im Arbeitsspeicher hinzu.</span><span class="sxs-lookup"><span data-stu-id="5ae71-118">MSBuild then reads this file and translates it into a set of folders where potential references can be found, and then adds them to the project tree in memory.</span></span>

<span data-ttu-id="5ae71-119">Die `project.assets.json`-Datei dient nur als temporäre Datei und sollte nicht der Quellcodeverwaltung hinzugefügt werden.</span><span class="sxs-lookup"><span data-stu-id="5ae71-119">The `project.assets.json` file is temporary and should not be added to source control.</span></span> <span data-ttu-id="5ae71-120">Sie wird standardmäßig sowohl in `.gitignore` als auch in `.tfignore` aufgeführt.</span><span class="sxs-lookup"><span data-stu-id="5ae71-120">It's listed by default in both `.gitignore` and `.tfignore`.</span></span> <span data-ttu-id="5ae71-121">Weitere Informationen finden Sie unter [Packages and source control (Pakete und Quellcodeverwaltung)](packages-and-source-control.md).</span><span class="sxs-lookup"><span data-stu-id="5ae71-121">See [Packages and source control](packages-and-source-control.md).</span></span>

### <a name="dependency-resolution-rules"></a><span data-ttu-id="5ae71-122">Regeln für die Abhängigkeitsauflösung</span><span class="sxs-lookup"><span data-stu-id="5ae71-122">Dependency resolution rules</span></span>

<span data-ttu-id="5ae71-123">Bei der transitiven Wiederherstellen werden vier Regeln angewendet, um Abhängigkeiten aufzulösen: die der niedrigsten anwendbaren Version, die der unverankerten Versionen, „Nearest wins“ („die nächste Version gewinnt“) und die der verwandten Abhängigkeiten.</span><span class="sxs-lookup"><span data-stu-id="5ae71-123">Transitive restore applies four main rules to resolve dependencies: lowest applicable version, floating versions, nearest-wins, and cousin dependencies.</span></span>

<a name="lowest-applicable-version"></a>

#### <a name="lowest-applicable-version"></a><span data-ttu-id="5ae71-124">Niedrigste anwendbare Version</span><span class="sxs-lookup"><span data-stu-id="5ae71-124">Lowest applicable version</span></span>

<span data-ttu-id="5ae71-125">Die Regel der niedrigsten anwendbaren Version stellt die niedrigste mögliche Version eines Pakets in der Form wieder her, wie sie von dessen Abhängigkeiten definiert wird.</span><span class="sxs-lookup"><span data-stu-id="5ae71-125">The lowest applicable version rule restores the lowest possible version of a package as defined by its dependencies.</span></span> <span data-ttu-id="5ae71-126">Dies gilt auch für Abhängigkeiten von der Anwendung oder der Klassenbibliothek, wenn sie nicht als [unverankert](#floating-versions) deklariert werden.</span><span class="sxs-lookup"><span data-stu-id="5ae71-126">It also applies to dependencies on the application or the class library unless declared as [floating](#floating-versions).</span></span>

<span data-ttu-id="5ae71-127">In der folgenden Abbildung wird beispielsweise die Betaversion 1.0 niedriger eingeordnet als die Version 1.0, und NuGet entscheidet sich für die Version 1.0:</span><span class="sxs-lookup"><span data-stu-id="5ae71-127">In the following figure, for example, 1.0-beta is considered lower than 1.0 so NuGet chooses the 1.0 version:</span></span>

![Auswählen der niedrigsten anwendbaren Version](media/projectJson-dependency-1.png)

<span data-ttu-id="5ae71-129">In der nächsten Abbildung ist Version 2.1 nicht auf dem Feed verfügbar, aber da die Versionseinschränkung „>= 2.1“ lautet, wählt NuGet die niedrigste Version aus, die es finden kann. Das ist in diesem Fall Version 2.2:</span><span class="sxs-lookup"><span data-stu-id="5ae71-129">In the next figure, version 2.1 is not available on the feed but because the version constraint is >= 2.1 NuGet picks the next lowest version it can find, in this case 2.2:</span></span>

![Auswählen der niedrigsten auf dem Feed verfügbaren Version](media/projectJson-dependency-2.png)

<span data-ttu-id="5ae71-131">Wenn eine Anwendung eine genaue Versionsnummer wie 1.2 angibt, die auf dem Feed nicht verfügbar ist, löst NuGet bei dem Versuch, das Paket zu installieren oder wiederherzustellen, einen Fehler aus:</span><span class="sxs-lookup"><span data-stu-id="5ae71-131">When an application specifies an exact version number, such as 1.2, that is not available on the feed, NuGet fails with an error when attempting to install or restore the package:</span></span>

![NuGet generiert einen Fehler, wenn eine bestimmte angegebene Paketversion nicht verfügbar ist](media/projectJson-dependency-3.png)

<a name="floating-versions"></a>

#### <a name="floating-wildcard-versions"></a><span data-ttu-id="5ae71-133">Platzhalterversionen (unverankert)</span><span class="sxs-lookup"><span data-stu-id="5ae71-133">Floating (wildcard) versions</span></span>

<span data-ttu-id="5ae71-134">Eine Platzhalterabhängigkeitsversion bzw. eine unverankerte Abhängigkeitsversion wird wie in Version 6.0.\* mit dem Platzhalterzeichen \* angegeben.</span><span class="sxs-lookup"><span data-stu-id="5ae71-134">A floating or wildcard dependency version is specified with the \* wildcard, as with 6.0.\*.</span></span> <span data-ttu-id="5ae71-135">Diese Versionsspezifikation legt fest, dass die neuste 6.0.x-Version verwendet werden soll, und 4.\* legt fest, dass die neuste 4.x-Version verwendet werden soll.</span><span class="sxs-lookup"><span data-stu-id="5ae71-135">This version specification says "use the latest 6.0.x version"; 4.\* means "use the latest 4.x version."</span></span> <span data-ttu-id="5ae71-136">Wenn ein Platzhalterzeichen verwendet wird, kann ein Abhängigkeitspaket weiterentwickelt werden, ohne dass eine Änderung an der verarbeitenden Anwendung (oder dem verarbeitenden Projekt) erforderlich ist.</span><span class="sxs-lookup"><span data-stu-id="5ae71-136">Using a wildcard allows a dependency package to continue evolving without requiring a change to the consuming application (or package).</span></span>

<span data-ttu-id="5ae71-137">Wenn ein Platzhalterzeichen verwendet wird, löst NuGet die höchste Version eines Pakets auf, die dem Versionsmuster entspricht. Beispielsweise wird für 6.0.\* die höchste Version eines Pakets abgerufen, die mit 6.0 beginnt:</span><span class="sxs-lookup"><span data-stu-id="5ae71-137">When using a wildcard, NuGet resolves the highest version of a package that matches the version pattern, for example 6.0.\* gets the highest version of a package that starts with 6.0:</span></span>

![Auswählen der Version 6.0.1, wenn die unverankerte Version 6.0.\* angefordert ist.](media/projectJson-dependency-4.png)

> [!Note]
> <span data-ttu-id="5ae71-139">Informationen zum Verhalten von Patzhalterzeichen und zu Vorabversionen finden Sie unter [Paketversionsverwaltung](../reference/package-versioning.md#version-ranges-and-wildcards).</span><span class="sxs-lookup"><span data-stu-id="5ae71-139">For information on the behavior of wildcards and pre-release versions, see [Package versioning](../reference/package-versioning.md#version-ranges-and-wildcards).</span></span>


<a name="nearest-wins"></a>

#### <a name="nearest-wins"></a><span data-ttu-id="5ae71-140">„Nearest wins“</span><span class="sxs-lookup"><span data-stu-id="5ae71-140">Nearest wins</span></span>

<span data-ttu-id="5ae71-141">Wenn das Paketdiagramm für eine Anwendung verschiedene Versionen desselben Pakets enthält, wählt NuGet das Paket aus, das der Anwendung in dem Diagramm am nächsten ist und ignoriert alle anderen Pakete.</span><span class="sxs-lookup"><span data-stu-id="5ae71-141">When the package graph for an application contains different versions of the same package, NuGet chooses the package that's closest to the application in the graph and ignores all others.</span></span> <span data-ttu-id="5ae71-142">Durch dieses Verhalten kann die Anwendung eine bestimmte Paketversion in dem Abhängigkeitsdiagramm außer Kraft setzen.</span><span class="sxs-lookup"><span data-stu-id="5ae71-142">This behavior allows an application to override any particular package version in the dependency graph.</span></span>

<span data-ttu-id="5ae71-143">In der folgenden Abbildung ist die Anwendung direkt von Paket B mit der Versionseinschränkung „>=2.0“ abhängig.</span><span class="sxs-lookup"><span data-stu-id="5ae71-143">In the example below, the application depends directly on Package B with a version constraint of >=2.0.</span></span> <span data-ttu-id="5ae71-144">Außerdem ist die Anwendung von Paket A abhängig, welches wiederum von Paket B abhängig ist, wobei die Einschränkung „>=1.0“ gilt.</span><span class="sxs-lookup"><span data-stu-id="5ae71-144">The application also depends on Package A which in turn also depends on Package B, but with a >=1.0 constraint.</span></span> <span data-ttu-id="5ae71-145">Da die Abhängigkeit von Paket B 2.0 näher an der Anwendung in dem Diagramm liegt, wird diese Version verwendet:</span><span class="sxs-lookup"><span data-stu-id="5ae71-145">Because the dependency on Package B 2.0 is nearer to the application in the graph, that version is used:</span></span>

![Anwendung, die die Regel „Nearest wins“ verwendet](media/projectJson-dependency-5.png)

>[!Warning]
> <span data-ttu-id="5ae71-147">Aufgrund der Regel „Nearest wins“ kann es dazu kommen, dass eine Paketversion herabgestuft wird, wodurch möglicherweise andere Abhängigkeiten in dem Diagramm unterbrochen werden.</span><span class="sxs-lookup"><span data-stu-id="5ae71-147">The Nearest Wins rule can result in a downgrade of the package version, thus potentially breaking other dependencies in the graph.</span></span> <span data-ttu-id="5ae71-148">Aus diesem Grund wird dem Benutzer eine Warnmeldung angezeigt, wenn diese Regel angewendet wird.</span><span class="sxs-lookup"><span data-stu-id="5ae71-148">Hence this rule is applied with a warning to alert the user.</span></span>

<span data-ttu-id="5ae71-149">Diese Regel ist außerdem effizienter und führt zu einem größeren Abhängigkeitsdiagramm (z.B. bei BCL-Paketen), da NuGet alle Abhängigkeiten von der jeweiligen Verzweigung eines Diagramms löscht, sobald eine vorhandene Abhängigkeit ignoriert wird.</span><span class="sxs-lookup"><span data-stu-id="5ae71-149">This rule also results in greater efficiency with a large dependency graph (such as those with the BCL packages) because once a given dependency is ignored, NuGet also ignores all remaining dependencies on that branch of the graph.</span></span> <span data-ttu-id="5ae71-150">Dies wird beispielsweise im folgenden Diagramm deutlich: Das Paket C 2.0 wird verwendet, weshalb NuGet jegliche Verzweigungen in dem Diagramm ignoriert, die auf eine ältere Version von Paket C verweisen:</span><span class="sxs-lookup"><span data-stu-id="5ae71-150">In the diagram below, for example, because Package C 2.0 is used, NuGet ignores any branches in the graph that refer to an older version of Package C:</span></span>

![Wenn NuGet ein Paket in einem Diagramm ignoriert, wird die gesamte Verzweigung ignoriert.](media/projectJson-dependency-6.png)

<a name="cousin-dependencies"></a>

#### <a name="cousin-dependencies"></a><span data-ttu-id="5ae71-152">Verwandte Abhängigkeiten</span><span class="sxs-lookup"><span data-stu-id="5ae71-152">Cousin dependencies</span></span>

<span data-ttu-id="5ae71-153">Wenn auf verschiedene Paketversionen verweisen wird, die im Diagramm alle die gleiche Entfernung zur Anwendung haben, verwendet NuGet die niedrigste Version, die den Versionsanforderungen entspricht (genauso wie bei den Regeln [Niedrigste anwendbare Version](#lowest-applicable-version) und [unverankerte Versionen](#floating-versions)).</span><span class="sxs-lookup"><span data-stu-id="5ae71-153">When different package versions are referred to at the same distance in the graph from the application, NuGet uses the lowest version that satisfies all version requirements (as with the [lowest applicable version](#lowest-applicable-version) and [floating versions](#floating-versions) rules).</span></span> <span data-ttu-id="5ae71-154">In der folgenden Abbildung entspricht beispielsweise Version 2.0 von Paket B der Einschränkung „>=1.0“ und wird deshalb verwendet:</span><span class="sxs-lookup"><span data-stu-id="5ae71-154">In the image below, for example, version 2.0 of Package B satisfies the other >=1.0 constraint, and is thus used:</span></span>

![Auflösen von verwandten Abhängigkeiten mithilfe der niedrigsten Version, die sämtlichen Einschränkungen entspricht](media/projectJson-dependency-7.png)

<span data-ttu-id="5ae71-156">Manchmal ist es nicht möglich, allen Versionsanforderungen zu entsprechen.</span><span class="sxs-lookup"><span data-stu-id="5ae71-156">In some cases, it's not possible to meet all version requirements.</span></span> <span data-ttu-id="5ae71-157">Wenn Paket A, wie in der folgenden Abbildung dargestellt, genau Paket B 1.0 und Paket C die Einschränkung „Paket B >=2.0“ erfordert, kann NuGet die Abhängigkeiten nicht auflösen und löst einen Fehler aus.</span><span class="sxs-lookup"><span data-stu-id="5ae71-157">As shown below, if Package A requires exactly Package B 1.0 and Package C requires Package B >=2.0, then NuGet cannot resolve the dependencies and gives an error.</span></span>

![Nicht auflösbare Abhängigkeiten aufgrund einer genauen Versionsanforderung](media/projectJson-dependency-8.png)

<span data-ttu-id="5ae71-159">In Fällen wie diesem sollte der Benutzer auf oberster Ebene (die Anwendung oder das Paket) seine eigenen Abhängigkeiten von Paket B hinzufügen, sodass die Regel [Nearest wins](#nearest-wins) angewendet werden kann.</span><span class="sxs-lookup"><span data-stu-id="5ae71-159">In these situations, the top-level consumer (the application or package) should add its own direct dependency on Package B so that the [Nearest Wins](#nearest-wins) rule applies.</span></span>

## <a name="dependency-resolution-with-packagesconfig"></a><span data-ttu-id="5ae71-160">Abhängigkeitsauflösung mit „packages.config“</span><span class="sxs-lookup"><span data-stu-id="5ae71-160">Dependency resolution with packages.config</span></span>

<span data-ttu-id="5ae71-161">Bei `packages.config`-Dateien werden die Abhängigkeiten eines Projekts als flache Listen in `packages.config` geschrieben.</span><span class="sxs-lookup"><span data-stu-id="5ae71-161">With `packages.config`, a project's dependencies are written to `packages.config` as a flat list.</span></span> <span data-ttu-id="5ae71-162">Jegliche Abhängigkeiten dieser Pakete werden in diese Liste geschrieben.</span><span class="sxs-lookup"><span data-stu-id="5ae71-162">Any dependencies of those packages are also written in the same list.</span></span> <span data-ttu-id="5ae71-163">Bei der Installation von Paketen ändert NuGet möglicherweise die `.csproj`-Datei, `app.config`, `web.config` oder andere einzelne Dateien.</span><span class="sxs-lookup"><span data-stu-id="5ae71-163">When packages are installed, NuGet might also modify the `.csproj` file, `app.config`, `web.config`, and other individual files.</span></span>

<span data-ttu-id="5ae71-164">Im Hinblick auf die `packages.config`-Datei versucht NuGet, Abhängigkeitskonflikte aufzulösen, die bei der Installation einzelner Pakete entstehen können.</span><span class="sxs-lookup"><span data-stu-id="5ae71-164">With `packages.config`, NuGet attempts to resolve dependency conflicts during the installation of each individual package.</span></span> <span data-ttu-id="5ae71-165">Das bedeutet: Wenn Paket A installiert wird und von Paket B abhängig ist, wobei Paket B bereits in der `packages.config`-Datei als Abhängigkeit eines anderen Objekts aufgeführt ist, vergleicht NuGet die verlangten Versionen von Paket B und versucht, eine Version zu finden, die allen Versionseinschränkungen entspricht.</span><span class="sxs-lookup"><span data-stu-id="5ae71-165">That is, if Package A is being installed and depends on Package B, and Package B is already listed in `packages.config` as a dependency of something else, NuGet compares the versions of Package B being requested and attempts to find a version that satisfies all version constraints.</span></span> <span data-ttu-id="5ae71-166">NuGet wählt also die niedrigste *Hauptversion.Nebenversion* aus, die allen Abhängigkeiten entspricht.</span><span class="sxs-lookup"><span data-stu-id="5ae71-166">Specifically, NuGet selects the lower *major.minor* version that satisfies dependencies.</span></span>

<span data-ttu-id="5ae71-167">NuGet 2.8 sucht standardgemäß nach der niedrigsten Patchversion (siehe [NuGet 2.8 release notes (Anmerkungen zu NuGet Version 2.8)](../release-notes/nuget-2.8.md#patch-resolution-for-dependencies)).</span><span class="sxs-lookup"><span data-stu-id="5ae71-167">By default, NuGet 2.8 looks for the lowest patch version (see [NuGet 2.8 release notes](../release-notes/nuget-2.8.md#patch-resolution-for-dependencies)).</span></span> <span data-ttu-id="5ae71-168">Diese Einstellung können Sie über das `DependencyVersion`-Attribut in der `Nuget.Config`-Datei und den `-DependencyVersion`-Schalter in der Befehlszeile ändern.</span><span class="sxs-lookup"><span data-stu-id="5ae71-168">You can control this setting through the `DependencyVersion` attribute in `Nuget.Config` and the `-DependencyVersion` switch on the command line.</span></span>  

<span data-ttu-id="5ae71-169">Der `packages.config`-Vorgang zum Auflösen von Abhängigkeiten gestaltet sich bei größeren Abhängigkeitsdiagrammen als schwierig.</span><span class="sxs-lookup"><span data-stu-id="5ae71-169">The `packages.config` process for resolving dependencies gets complicated for larger dependency graphs.</span></span> <span data-ttu-id="5ae71-170">Bei jeder neuen Paketinstallation ist ein Durchlauf des gesamten Diagramms erforderlich, wobei Versionskonflikte entstehen können.</span><span class="sxs-lookup"><span data-stu-id="5ae71-170">Each new package installation requires a traversal of the whole graph and raises the chance for version conflicts.</span></span> <span data-ttu-id="5ae71-171">Wenn ein Konflikt entsteht, wird die Installation angehalten. Dann befindet sich das Projekt in einem unbestimmten Zustand, insbesondere, wenn Änderungen an der Projektdatei vorgenommen werden.</span><span class="sxs-lookup"><span data-stu-id="5ae71-171">When a conflict occurs, installation is stopped, leaving the project in an indeterminate state, especially with potential modifications to the project file itself.</span></span> <span data-ttu-id="5ae71-172">Dieses Problem tritt nicht auf, wenn andere Formate für die Paketverwaltung verwendet werden.</span><span class="sxs-lookup"><span data-stu-id="5ae71-172">This is not an issue when using other package management formats.</span></span>

## <a name="managing-dependency-assets"></a><span data-ttu-id="5ae71-173">Verwalten von Abhängigkeitsobjekten</span><span class="sxs-lookup"><span data-stu-id="5ae71-173">Managing dependency assets</span></span>

<span data-ttu-id="5ae71-174">Wenn Sie das PackageReference-Format verwenden, können Sie kontrollieren, welche Objekte aus den Abhängigkeiten in die Projekte auf oberster Ebene fließen.</span><span class="sxs-lookup"><span data-stu-id="5ae71-174">When using the PackageReference format, you can control which assets from dependencies flow into the top-level project.</span></span> <span data-ttu-id="5ae71-175">Weitere Informationen finden Sie unter [PackageReference](package-references-in-project-files.md#controlling-dependency-assets).</span><span class="sxs-lookup"><span data-stu-id="5ae71-175">For details, see [PackageReference](package-references-in-project-files.md#controlling-dependency-assets).</span></span>

<span data-ttu-id="5ae71-176">Wenn es sich bei dem Projekt auf oberster Ebene bereits um ein Paket handelt, können Sie diesen Flow kontrollieren, indem Sie die Attribute `include` und `exclude` verwenden. Dabei müssen Abhängigkeiten in der `.nuspec`-Datei aufgeführt sein.</span><span class="sxs-lookup"><span data-stu-id="5ae71-176">When the top-level project is itself a package, you also have control over this flow by using the `include` and `exclude` attributes with dependencies listed in the `.nuspec` file.</span></span> <span data-ttu-id="5ae71-177">Informationen dazu finden Sie unter [.nuspec Reference – Dependencies (NUSPEC-Referenz: Abhängigkeiten)](../reference/nuspec.md#dependencies).</span><span class="sxs-lookup"><span data-stu-id="5ae71-177">See [.nuspec Reference - Dependencies](../reference/nuspec.md#dependencies).</span></span>

## <a name="excluding-references"></a><span data-ttu-id="5ae71-178">Ausschließen von Verweisen</span><span class="sxs-lookup"><span data-stu-id="5ae71-178">Excluding references</span></span>

<span data-ttu-id="5ae71-179">In einigen Szenarios wird möglicherweise mehrmals in einem Projekt auf Assemblys verwiesen, die denselben Namen haben, wodurch Fehler ausgelöst werden, die die Entwurfszeit und die Buildzeit betreffen.</span><span class="sxs-lookup"><span data-stu-id="5ae71-179">There are scenarios in which assemblies with the same name might be referenced more than once in a project, producing design-time and build-time errors.</span></span> <span data-ttu-id="5ae71-180">Nehmen wir z.B. ein Projekt mit einer benutzerdefinierten Version von `C.dll`, das auf Paket C verweist, das ebenfalls `C.dll` enthält.</span><span class="sxs-lookup"><span data-stu-id="5ae71-180">Consider a project that contains a custom version of `C.dll`, and references Package C that also contains `C.dll`.</span></span> <span data-ttu-id="5ae71-181">Gleichzeitig ist das Projekt von Paket B abhängig, das ebenfalls von Paket C und `C.dll` abhängig ist.</span><span class="sxs-lookup"><span data-stu-id="5ae71-181">At the same time, the project also depends on Package B which also depends on Package C and `C.dll`.</span></span> <span data-ttu-id="5ae71-182">Aus diesem Grund kann NuGet nicht bestimmen, welche `C.dll`-Version es verwenden soll. Sie können dabei aber nicht die Abhängigkeit des Projekts von Paket C entfernen, da auch Paket B davon abhängig ist.</span><span class="sxs-lookup"><span data-stu-id="5ae71-182">As a result, NuGet can't determine which `C.dll` to use, but you can't just remove the project's dependency on Package C because Package B also depends on it.</span></span>

<span data-ttu-id="5ae71-183">Wenn Sie dieses Problem lösen möchten, müssen Sie direkt auf die Version von `C.dll` verweisen, die verwendet werden soll, oder ein anderes Paket verwenden, dass auf die richtige Version verweist. Fügen Sie anschließend eine Abhängigkeit von Paket C hinzu, die alle Objekte dieses Pakets ausschließt.</span><span class="sxs-lookup"><span data-stu-id="5ae71-183">To resolve this, you must directly reference the `C.dll` you want (or use another package that references the right one), and then add a dependency on Package C that excludes all its assets.</span></span> <span data-ttu-id="5ae71-184">Abhängig von dem verwendeten Format für die Paketverwaltung, führen Sie dafür folgende Schritte aus:</span><span class="sxs-lookup"><span data-stu-id="5ae71-184">This is done as follows depending on the package management format in use:</span></span>

- <span data-ttu-id="5ae71-185">[PackageReference](../consume-packages/package-references-in-project-files.md): Fügen Sie der Abhängigkeit `ExcludeAssets="All"` hinzu:</span><span class="sxs-lookup"><span data-stu-id="5ae71-185">[PackageReference](../consume-packages/package-references-in-project-files.md): add `ExcludeAssets="All"` in the dependency:</span></span>

    ```xml
    <PackageReference Include="PackageC" Version="1.0.0" ExcludeAssets="All" />
    ```

- <span data-ttu-id="5ae71-186">`packages.config`: Entfernen Sie den Verweis auf Paket C von der `.csproj`-Datei, sodass nur auf die Version von `C.dll` verwiesen wird, die Sie verwenden möchten.</span><span class="sxs-lookup"><span data-stu-id="5ae71-186">`packages.config`: remove the reference to PackageC from the `.csproj` file so that it references only the version of `C.dll` that you want.</span></span>
    
## <a name="dependency-updates-during-package-install"></a><span data-ttu-id="5ae71-187">Aktualisierung von Abhängigkeiten bei der Paketinstallation</span><span class="sxs-lookup"><span data-stu-id="5ae71-187">Dependency updates during package install</span></span> 

<span data-ttu-id="5ae71-188">Wenn eine Abhängigkeitsversion bereits erfüllt ist, wird die Abhängigkeit nicht bei anderen Paketinstallationen aktualisiert.</span><span class="sxs-lookup"><span data-stu-id="5ae71-188">If a dependency version is already satisfied, the dependency isn't updated during other package installations.</span></span> <span data-ttu-id="5ae71-189">Nehmen wir z.B. Paket A, das von Paket B abhängig ist und die Versionsnummer 1.0 angibt.</span><span class="sxs-lookup"><span data-stu-id="5ae71-189">For example, consider package A that depends on package B and specifies 1.0 for the version number.</span></span> <span data-ttu-id="5ae71-190">Das Quellrepository enthält die Versionen 1.0, 1.1 und 1.2 von Paket B. Wenn Paket A dann in einem Projekt installiert wird, das bereits Version 1.0 von Paket B enthält, wird Paket B Version 1.0 weiterhin verwendet, weil es die Versionseinschränkungen erfüllt.</span><span class="sxs-lookup"><span data-stu-id="5ae71-190">The source repository contains versions 1.0, 1.1, and 1.2 of package B. If A is installed in a project that already contains B version 1.0, then B 1.0 remains in use because it satisfies the version constraint.</span></span> <span data-ttu-id="5ae71-191">Wenn allerdings Paket A Version 1.1 oder höher von Paket B verlangt, wird Paket B 1.2 installiert.</span><span class="sxs-lookup"><span data-stu-id="5ae71-191">However, if package A had requests version 1.1 or higher of B, then B 1.2 would be installed.</span></span> 

## <a name="resolving-incompatible-package-errors"></a><span data-ttu-id="5ae71-192">Auflösen von inkompatiblen Paketfehlern</span><span class="sxs-lookup"><span data-stu-id="5ae71-192">Resolving incompatible package errors</span></span>

<span data-ttu-id="5ae71-193">Bei der Wiederherstellung eines Pakets wird möglicherweise der Fehler „One or more packages are not compatible.“ („Mindestens ein Paket ist nicht kompatibel.“) angezeigt, oder es wird gemeldet, dass ein Paket „nicht kompatibel“ mit dem Zielframework des Projekts ist.</span><span class="sxs-lookup"><span data-stu-id="5ae71-193">During a package restore operation, you may see the error "One or more packages are not compatible..." or that a package "is not compatible" with the project's target framework.</span></span>

<span data-ttu-id="5ae71-194">Dieser Fehler wird ausgelöst, wenn für mindestens eins der Pakete, auf die in dem Projekt verweisen wird, nicht angegeben ist, dass es das Zielframework des Projekts unterstützt. D.h., das Paket enthält keine passende DLL in seinem `lib`-Ordner für ein mit dem Projekt kompatibles Zielframework.</span><span class="sxs-lookup"><span data-stu-id="5ae71-194">This error occurs when one or more of the packages referenced in your project do not indicate that they support the project's target framework; that is, the package does not contain a suitable DLL in its `lib` folder for a target framework that is compatible with the project.</span></span> <span data-ttu-id="5ae71-195">(Eine Liste dazu finden Sie unter [Zielframeworks](../reference/target-frameworks.md).)</span><span class="sxs-lookup"><span data-stu-id="5ae71-195">(See [Target frameworks](../reference/target-frameworks.md) for a list.)</span></span> 

<span data-ttu-id="5ae71-196">Wenn Sie beispielsweise versuchen, in einem Projekt für `netstandard1.6` ein Paket zu installieren, das nur in den Ordnern `lib\net20` und `\lib\net45` DLLs enthält, werden Meldungen für das Paket und dessen abhängigen Objekte angezeigt, die der Folgenden ähnlich sind:</span><span class="sxs-lookup"><span data-stu-id="5ae71-196">For example, if a project targets `netstandard1.6` and you attempt to install a package that contains DLLs in only the `lib\net20` and `\lib\net45` folders, then you see messages like the following for the package and possibly its dependents:</span></span>

```output
Restoring packages for myproject.csproj...
Package ContosoUtilities 2.1.2.3 is not compatible with netstandard1.6 (.NETStandard,Version=v1.6). Package ContosoUtilities 2.1.2.3 supports:
  - net20 (.NETFramework,Version=v2.0)
  - net45 (.NETFramework,Version=v4.5)
Package ContosoCore 0.86.0 is not compatible with netstandard1.6 (.NETStandard,Version=v1.6). Package ContosoCore 0.86.0 supports:
  - 11 (11,Version=v0.0)
  - net20 (.NETFramework,Version=v2.0)
  - sl3 (Silverlight,Version=v3.0)
  - sl4 (Silverlight,Version=v4.0)
One or more packages are incompatible with .NETStandard,Version=v1.6.
Package restore failed. Rolling back package changes for 'MyProject'.
```

<span data-ttu-id="5ae71-197">Führen Sie die folgenden Schritte aus, um Inkompatibilitäten aufzulösen:</span><span class="sxs-lookup"><span data-stu-id="5ae71-197">To resolve incompatibilities, do one of the following:</span></span>

- <span data-ttu-id="5ae71-198">Richten Sie Ihr Projekt auf ein anderes Framework aus, das von den Paketen unterstützt wird, die Sie verwenden möchten.</span><span class="sxs-lookup"><span data-stu-id="5ae71-198">Retarget your project to a framework that is supported by the packages you want to use.</span></span>
- <span data-ttu-id="5ae71-199">Kontaktieren Sie den Autor der Pakete, und arbeiten Sie mit diesem zusammen, um die Unterstützung des ausgewählten Frameworks hinzuzufügen.</span><span class="sxs-lookup"><span data-stu-id="5ae71-199">Contact the author of the packages and work with them to add support for your chosen framework.</span></span> <span data-ttu-id="5ae71-200">Dafür verfügt jede Seite mit Auflistungen von Paketen auf [nuget.org](https://www.nuget.org/) über den Link **Besitzer kontaktieren**.</span><span class="sxs-lookup"><span data-stu-id="5ae71-200">Each package listing page on [nuget.org](https://www.nuget.org/) has a **Contact Owners** link for this purpose.</span></span>

